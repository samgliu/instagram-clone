{"version":3,"sources":["images/instagram.png","components/Firebase.js","context/GlobalState.js","components/ProfileMenu.js","components/Iconmenu.js","components/Header.js","components/DropdownButton.js","components/Post.js","components/Posts.js","images/noimg.svg","components/Newpost.js","components/Signin.js","components/PostDetailHeader.js","components/PostDetail.js","components/Home.js","components/Signup.js","components/Profile.js","components/MessageSelect.js","components/Message.js","images/defaultMessage.jpg","components/Routes.js","index.js"],"names":["db","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","getFirestore","initialState","GlobalContext","createContext","GlobalProvider","children","useState","isProfileMenuOpen","setIsProfileMenuOpen","isHomeClicked","setIsHomeClicked","messageButtonClicked","setMessageButtonClicked","curuser","setCuruser","curemail","setCuremail","isNewpostOpen","setIsNewpostOpen","displayname","setDisplayname","username","setUsername","useruid","setUseruid","posts","setPosts","profilepic","setProfilepic","isusersignedin","setIsusersignedin","imgblob","setImgblob","profiledata","setProfiledata","isfollowed","setIsfollowed","allRooms","setAllRooms","chatHistory","setChatHistory","friendId","setFriendId","chatRoomId","setChatRoomId","storage","getStorage","history","useHistory","testauth","getAuth","a","Promise","resolve","reject","onAuthStateChanged","user","error","getDataFromserver","usr","sortsetPosts","thenewarr","sorted","sort","b","timestamp","Date","now","theuid","uid","locdoc","doc","getDoc","userdoc","userdata","data","loccol","collection","followingusers","following","cols","query","getDocs","colarr","tempCollection","mapPosts","thecolarr","resArr","forEach","thedoc","push","mapFollowing","thefollowingusers","fousercol","fousercols","focolarr","postsArr","tempArr","col","theref","ref","path","orderBy","docsSnap","commentArr","empty","snap","owneruser","avatar","newObj","ownerDoc","ownerdata","newdoc","uuid","comments","sortedTempArr","fetchGroupByUserID","regetdataFromserver","auth","currentUser","displayName","photoURL","console","log","processArray","array","newarr","tempCmtCollection","locavatardata","avatardata","info","nickName","name","filedata","arr","setTimeout","theName","theInfo","isNameChanged","isInfoChange","setDoc","merge","item","theDoc","updateDoc","arrayUnion","arrayRemove","inputtext","imgurl","imgstorageRef","uuidv4","uploadBytes","then","snapshot","getDownloadURL","downloadURL","randomPostId","topic","pic","serverTimestamp","postid","locDoc","deleteDoc","inputText","targetUid","targetPostId","comment","createnewUserdata","email","fullname","followers","password","createUserWithEmailAndPassword","userCredential","updateProfile","catch","keyword","usersRef","res","where","usersDocs","userArr","onSubmitSignin","signOut","isLogedIn","signInWithEmailAndPassword","roomRef","q","unsubscribe","onSnapshot","querySnapshot","rooms","members","fetchFriendInfo","friendData","roomid","id","friendAvatar","friendName","myUid","filter","fetchInfoById","locdata","fetchChatHistoryByRoom","chatArr","theUid","from","pos","theDif","Math","round","seconds","time","toDate","toString","substring","position","content","chatMsg","target","isCreatedBefore","friendUid","addDoc","roomId","Provider","value","onSubmitSignup","getUserinfo","userLogout","savePostToserver","defaultLogin","getprofileFromserver","saveAvatartoserver","checkLogin","followTarget","unfollowTarget","checkisFollowed","saveCommentToServer","deletePostFromServer","saveProfileInfoToServer","searchUserFromServer","postChatToServer","createChatroomOnServer","ProfileMenu","useContext","className","onClick","e","preventDefault","profileOnclick","to","pathname","handleProceed","logout","Iconmenu","tabIndex","homebtnonClick","color","fill","height","role","viewBox","width","d","messageOnClick","type","newpostonClick","profilebtnonClick","undefined","src","alt","Header","isSearchOpen","setIsSearchOpen","setKeyword","searchResult","setSearchResult","useEffect","instagram","placeholder","onFocus","searchOnFocus","onBlur","searchOnBlur","onChange","onKeyDown","code","searchOnEnter","map","resUser","onMouseDown","link","DropdownButton","handleDeleteOnPost","isOwner","handleThreePtClicked","isMenuOpen","setIsMenuOpen","handleClicked","cx","cy","r","deleteOnClick","Post","post","handleShowDetail","setIsOwner","isPostDeleted","setIsPostDeleted","viewPost","cmt","cmtUid","cmtRender","href","postOnClick","Posts","locComments","length","author","postRender","Newpost","noimg","previewimg","setPreviewimg","loctext","savePost","onCloseClick","document","getElementById","click","selectbtnonClick","files","window","URL","createObjectURL","onSelectChange","style","display","rows","required","Signin","onSubmit","event","fontSize","PostDetailHeader","postUid","Postdetail","setIsPostDetailOpen","isPostDetailOpen","Home","props","detailData","setDetailData","response","fetchData","Signup","Profile","ischangingavatar","setIschangingavatar","locIsFollowed","setLocIsFollowed","editingInfo","setEditingInfo","isProfileowner","setIsProfileowner","information","followedbtnrender","unfollowOnClicked","notfollowedbtnrender","followOnClicked","title","onsavebtnOnclicked","editOnClick","defaultValue","saveEditOnClick","profile","MessageSelect","closeNewMsg","HandleNextOnClick","selectedUser","setSelectedUser","resItemRender","theUser","resultItemOnClick","stroke","strokeLinejoin","strokeWidth","nextOnClick","Message","isDefaultView","setIsDefaultView","isSelectBoxOpen","setIsSelectBoxOpen","sendMsgOnClick","roomRender","room","nameOnClick","sendMessage","chat","parentNode","firstChild","Routes","exact","render","component","match","params","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.8c9d5b4f.chunk.js","sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM4AAAA6CAMAAADPwpb5AAAC/VBMVEUAAAAjHyAjHyD///8jICAkHyQjHyAnISFAIEAjICAkJCQkICEjHyAoIiIjHyArKyskJCQlISFVVVUjICGAgIAnISEkHyEkICElHyUkHyAuLi4jICMjICEuIyMjICEpIyNAQEAoIiIjICIlICUmISEkICEjICMkISEpKSkkICAjICElHyEzMzMlIiIkICQjICEkHyEkICEkICEkICAmIiI5OTkmJiYlICIjHyAnJycmISEoKCgjHyEkICEkJCQlHyIjICIkICAkHyEjIyMjICEkICAkHyElICAkICAkHyEkHyEkISEkHyEkJCQjICEkHyAlHyIkICEkHyAnJyckICEjHyEsISEpIiIkICEjICAkISEkICAjHyMrICskICAkISEkHyAjIyMjIyMrKyskHyAkICEkISEjICEmIiIkICQmJiYrKyskHyEjIyMjHyEkICEzMzMkHyAoICgzIiItLS0jICAkISEnIyMkHyEpISEkICAmIiIjICAkHyIkIiIkICInIyMkICAkICAjICEkHyAmJiYmICYkICEkICAkHyAkICIlICAkICAkHyIjHyEjHyAkHyAlISEkICIjICEkICAmIiIkHyEkICAkICAlIiIjICAkICEjHyElIiIkICAkHyAkISEjHyEkISEkICEkJCQkJCQkISEkISEnJycjICIlICIkHyAjISEkICEkICAkICIkICEjICAkHyEkJCQjICEkHyIkHyElISEjICAjICAjHyAlICAkHyAlISErIiIkICAkHyElICIjICEjICAlHyEkHyElISEjHyEkICElICMlISEmHyMjISEkHyEkICEkICAnIiIjHyEjICEmISEjHyEjISElICAjICEkICAjICAjICEkISEjHyEmICMjISElICAmHyIkJCQmICAkICAkHyEkICIkICEkHyQjISEkICIjISEjHyEmHyMkICAkICIjICAjICAkICAwIDAkICEkICEjHyEkISEkISEjHyEkICEkICIkICAkHyEkISEjHyBS+u4fAAAA/nRSTlMA/v0B9zH8LgjvMvn2JvUGHD4D8AIn+/Ep7AtQmRbgLAQtmDA9+EhrGb7YkgVLQNHjsOqHQwkUYeYhLxPM4ipSkLd6JOmWrG9PlPNk2yPo3lqx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\"","import { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: 'AIzaSyDvSR669Bgrm258B6wxh8kfJEIBd3aR93w',\n    authDomain: 'clonewebsite-eb6e6.firebaseapp.com',\n    databaseURL: 'https://clonewebsite-eb6e6-default-rtdb.firebaseio.com',\n    projectId: 'clonewebsite-eb6e6',\n    storageBucket: 'clonewebsite-eb6e6.appspot.com',\n    messagingSenderId: '834377877962',\n    appId: '1:834377877962:web:658510eb0681943ea32733',\n    measurementId: 'G-7YRRRSCDTG',\n};\n\n// Initialize Firebase\nexport const App = initializeApp(firebaseConfig);\nexport const db = getFirestore();\n\n/*\n// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDvSR669Bgrm258B6wxh8kfJEIBd3aR93w\",\n  authDomain: \"clonewebsite-eb6e6.firebaseapp.com\",\n  databaseURL: \"https://clonewebsite-eb6e6-default-rtdb.firebaseio.com\",\n  projectId: \"clonewebsite-eb6e6\",\n  storageBucket: \"clonewebsite-eb6e6.appspot.com\",\n  messagingSenderId: \"834377877962\",\n  appId: \"1:834377877962:web:658510eb0681943ea32733\",\n  measurementId: \"G-7YRRRSCDTG\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\n*/\n","import React, { createContext, useState } from 'react';\nimport { db } from '../components/Firebase';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n    collection,\n    doc,\n    setDoc,\n    getDoc,\n    addDoc,\n    updateDoc,\n    serverTimestamp,\n    getDocs,\n    query,\n    arrayUnion,\n    arrayRemove,\n    where,\n    //limit,\n    orderBy,\n    onSnapshot,\n    deleteDoc,\n} from 'firebase/firestore';\nimport { useHistory } from 'react-router-dom';\nimport {\n    getAuth,\n    createUserWithEmailAndPassword,\n    signInWithEmailAndPassword,\n    onAuthStateChanged,\n    updateProfile,\n    //setPersistence,\n    //browserSessionPersistence,\n} from 'firebase/auth';\nimport { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\n\nconst initialState = [];\n\nexport const GlobalContext = createContext(initialState);\n\nexport const GlobalProvider = ({ children }) => {\n    const [isProfileMenuOpen, setIsProfileMenuOpen] = useState(false);\n    const [isHomeClicked, setIsHomeClicked] = useState(true);\n    const [messageButtonClicked, setMessageButtonClicked] = useState(false);\n    const [curuser, setCuruser] = useState();\n    const [curemail, setCuremail] = useState();\n    //const [info, setInfo] = useState();\n    const [isNewpostOpen, setIsNewpostOpen] = useState(false);\n    const [displayname, setDisplayname] = useState();\n    const [username, setUsername] = useState();\n    const [useruid, setUseruid] = useState();\n    const [posts, setPosts] = useState([]);\n    const [profilepic, setProfilepic] = useState();\n    const [isusersignedin, setIsusersignedin] = useState(false);\n    const [imgblob, setImgblob] = useState();\n    const [profiledata, setProfiledata] = useState();\n    //const [isProfileowner, setIsProfileowner] = useState(false);\n    const [isfollowed, setIsfollowed] = useState(false);\n    const [allRooms, setAllRooms] = useState([]);\n    const [chatHistory, setChatHistory] = useState([]);\n    //const [chatUnsubscribe, setChatUnsubscribe] = useState();\n    const [friendId, setFriendId] = useState();\n    const [chatRoomId, setChatRoomId] = useState();\n\n    const storage = getStorage();\n    const history = useHistory();\n    const testauth = getAuth();\n\n    async function checkLogin() {\n        try {\n            await new Promise((resolve, reject) =>\n                getAuth().onAuthStateChanged(\n                    (user) => {\n                        if (user) {\n                            // User is signed in.\n                            setIsusersignedin(true);\n                            resolve(user);\n                        } else {\n                            // No user is signed in.\n                            reject('no user logged in');\n                        }\n                    },\n                    // Prevent console error\n                    (error) => reject(error)\n                )\n            );\n            return true;\n        } catch (error) {\n            return false;\n        }\n    }\n    /*\n    async function checkLogin1() {\n        onAuthStateChanged(getAuth(), async (user) => {\n            setIsusersignedin(true);\n            if (user) return true;\n            else return false;\n        });\n        if (getAuth().currentUser) {\n            return true;\n        } else {\n            return false;\n        }\n        /*\n         onAuthStateChanged(testauth, (user) => {\n            if (user) {\n                setIsusersignedin(true);\n                console.log('User is signed in', user);\n                return true;\n            } else {\n                setIsusersignedin(false);\n                console.log('// No user is signed in.');\n                return false;\n            }\n        });\n    }*/\n\n    async function getDataFromserver(usr) {\n        //get posts for main user\n        //console.log('curuser', curuser);\n        //console.log('usr', usr);\n        let theuid = usr.uid;\n        let locdoc = doc(db, 'users', `${theuid}`); //, 'post'\n        let userdoc = await getDoc(locdoc);\n        let userdata = userdoc.data();\n        //console.log('userdata', userdata);\n        // let avatar = userdata.avatar;\n        let loccol = collection(locdoc, 'post');\n        let followingusers = userdata.following;\n        const cols = query(loccol);\n        const colarr = await getDocs(cols);\n        //console.log('getDataFromserver colarr', colarr);\n        //let newarr = [];\n        let tempCollection = []; // temp\n        //console.log('foreach 1');\n\n        const mapPosts = async (thecolarr) => {\n            const resArr = [];\n            // console.log('in mapPosts thecolarr', thecolarr);\n            thecolarr.forEach(async (thedoc) => {\n                tempCollection.push(thedoc);\n            });\n            //console.log('mapPosts resArr', resArr);\n            return resArr;\n        };\n\n        //==================1================\n        //console.log('before mapPosts colarr', colarr);\n        const mapFollowing = async (thefollowingusers) => {\n            const resArr = [];\n\n            thefollowingusers.forEach(async (thefollowingusers) => {\n                //console.log('followinguser', followinguser);\n                //let followinguserdoc = await getDoc(thefollowingusers);\n                //  console.log('followinguserdoc', followinguserdoc);\n                //let fodata = followinguserdoc.data();\n                let fousercol = collection(thefollowingusers, 'post');\n                const fousercols = query(fousercol);\n                // console.log('fousercols', fousercols);\n                const focolarr = await getDocs(fousercols);\n                //console.log('focolarr', focolarr);\n                let postsArr = await mapPosts(focolarr);\n                resArr.push(postsArr);\n            });\n            //console.log('resArr', resArr);\n            return resArr;\n        };\n\n        //===================2=================\n        // 2st foreach for following user's doc\n        //Object.keys(followingusers).map(async (followinguser) => {\n        await mapPosts(colarr);\n        //console.log('newarr1', newarr1);\n        await mapFollowing(followingusers);\n        // newarr = [...newarr1, ...newarr2];\n        //console.log('after mapFollowing', newarr);\n        async function sortsetPosts(thenewarr) {\n            //  console.log(thenewarr);\n            //  console.log('in sortsetPosts', thenewarr.length); // it's 0, so never sort\n\n            let sorted = thenewarr.sort((a, b) => {\n                //console.log('compareto ab', a, b);\n                // console.log('compareto', a.timestamp - b.timestamp);\n                if (a.timestamp === null) a.timestamp = Date.now();\n                if (b.timestamp === null) b.timestamp = Date.now();\n                return b.timestamp - a.timestamp;\n            });\n            //console.log('sortsetPosts response', sorted);\n            return sorted;\n        }\n\n        let tempArr = [];\n        //console.log('tempCollection', tempCollection);\n        for (let col of tempCollection) {\n            let theref = col.data();\n            let docsSnap = await getDocs(\n                query(\n                    collection(db, col.ref.path, 'comments'),\n                    orderBy('timestamp', 'desc') //, limit(2)\n                )\n            );\n\n            let commentArr = [];\n            if (!docsSnap.empty) {\n                docsSnap.forEach(async (snap) => {\n                    let avatar = (await getDoc(snap.data().owneruser)).data()\n                        .avatar;\n                    //console.log('avatar. ', avatar);\n                    //console.log('snap data', snap.data());\n                    let newObj = {\n                        ...snap.data(),\n                        avatar: avatar,\n                    };\n                    //console.log('avatar. ', newObj);\n\n                    commentArr.push(newObj);\n                });\n            }\n            let ownerDoc = theref.owneruser;\n            // console.log('ownerDoc', ownerDoc);\n            let ownerdata = (await getDoc(ownerDoc)).data();\n            //console.log('getDataFromserver ownerDoc', ownerdata);\n            let newdoc = {\n                ...col.data(),\n                avatar: ownerdata.avatar,\n                uuid: ownerdata.uid,\n                comments: commentArr,\n            };\n\n            tempArr.push(newdoc);\n        }\n        //console.log('collection tempArr', tempArr);\n        let sortedTempArr = await sortsetPosts(tempArr);\n\n        setPosts(sortedTempArr);\n        await fetchGroupByUserID(theuid);\n        //console.log('foreach 3');\n    }\n\n    async function regetdataFromserver() {\n        const auth = getAuth();\n        setDisplayname(auth.currentUser.displayName);\n        //console.log('called regetdataFromserver');\n        onAuthStateChanged(testauth, async (user) => {\n            if (user) {\n                setIsusersignedin(true);\n                await getDataFromserver(auth.currentUser);\n                setUsername(auth.currentUser.displayName);\n                setUseruid(auth.currentUser.uid);\n                setProfilepic(auth.currentUser.photoURL);\n                //console.log('User is signed in', user);\n            } else {\n                setIsusersignedin(false);\n                console.log('// No user is signed in.');\n            }\n        });\n    }\n\n    /*async function getprofileFromserver1(theuid) {\n        const auth = getAuth();\n        onAuthStateChanged(auth, async (user) => {\n            if (user) {\n                // console.log('getprofileFromserver user', user, theuid);\n                let ownerusername = user.displayName;\n\n                let locdoc = doc(db, 'users', `${theuid}`); //, 'post'\n                //console.log(locdoc);\n                let locavatardata = await getDoc(locdoc);\n                let avatardata = locavatardata.data();\n                //console.log('avatardata' + avatardata);\n                let avatar = avatardata.avatar; // avatar info under user's doc\n                let username = avatardata.username;\n                // console.log('username, owner', username, ownerusername);\n                /* if (username === ownerusername) {\n                    setIsProfileowner(true);\n                } else {\n                    setIsProfileowner(false);\n                }\n                let loccol = collection(locdoc, 'post');\n                const cols = query(loccol, orderBy('timestamp', 'desc'));\n                const colarr = await getDocs(cols);\n\n                const newarr = [];\n                let filedata = {\n                    arr: newarr,\n                };\n                \n                colarr.forEach((doc) => {\n                    let newdoc = { ...doc.data(), avatar: avatar };\n                    newarr.push(newdoc);\n                });\n                setProfiledata(newarr);\n                \n                async function processArray(array, newarr, avatar) {\n                    array.forEach((doc) => {\n                        //console.log('itemdata', doc.data());\n                        let newdoc = { ...doc.data(), avatar: avatar };\n                        newarr.push(newdoc);\n                    });\n                }\n                processArray(colarr, newarr, avatar).then((newarr) => {\n                    //setProfiledata(newarr);\n                    // console.log('after for each', newarr);\n                });\n                filedata = { ...filedata, avatar: avatar, username: username };\n                setProfiledata(filedata);\n                //console.log('after processArray');\n                // console.log(filedata);\n            } else {\n                console.log('// No user when getting profile');\n            }\n        });\n    }*/\n\n    async function getprofileFromserver(theuid) {\n        const auth = getAuth();\n        onAuthStateChanged(auth, async (user) => {\n            if (user) {\n                // console.log('getprofileFromserver user', user, theuid);\n                //let ownerusername = user.displayName;\n\n                let locdoc = doc(db, 'users', `${theuid}`); //, 'post'\n                // console.log(locdoc);\n                let locavatardata = await getDoc(locdoc);\n                let avatardata = locavatardata.data();\n                //console.log('avatardata', avatardata);\n                let avatar = avatardata.avatar; // avatar info under user's doc\n                let info = avatardata.info;\n                let nickName = avatardata.name;\n                let username = avatardata.username;\n                //  console.log('username, owner', username, ownerusername);\n\n                let loccol = collection(locdoc, 'post');\n                const cols = query(loccol, orderBy('timestamp', 'desc'));\n                const colarr = await getDocs(cols);\n\n                const newarr = [];\n                let filedata = {\n                    arr: newarr,\n                };\n                async function processArray(array, newarr, avatar) {\n                    array.forEach(async (col) => {\n                        //console.log('itemdata', col.data());\n\n                        let docsSnap = await getDocs(\n                            query(\n                                collection(db, col.ref.path, 'comments'),\n                                orderBy('timestamp', 'desc') //, limit(2)\n                            )\n                        );\n\n                        let commentArr = [];\n                        let tempCmtCollection = [];\n                        if (!docsSnap.empty) {\n                            docsSnap.forEach(async (snap) => {\n                                tempCmtCollection.push(snap);\n                            });\n                        }\n\n                        for (let snap of tempCmtCollection) {\n                            let avatar = (\n                                await getDoc(snap.data().owneruser)\n                            ).data().avatar;\n                            //console.log('avatar. ', avatar);\n                            //console.log('snap data', snap.data());\n                            let newObj = {\n                                ...snap.data(),\n                                avatar: avatar,\n                            };\n                            //console.log('avatar. ', newObj);\n\n                            commentArr.push(newObj);\n                        }\n\n                        let newdoc = {\n                            ...col.data(),\n                            avatar: avatar,\n                            comments: commentArr,\n                        };\n\n                        newarr.push(newdoc);\n                        return newarr;\n                    });\n                }\n                await processArray(colarr, newarr, avatar);\n                filedata = {\n                    ...filedata,\n                    avatar: avatar,\n                    username: username,\n                    name: nickName,\n                    info: info,\n                };\n                setTimeout(() => {\n                    // console.log('after processArray');\n                    setProfiledata(filedata);\n                }, 500); //delay for server, FIXME\n\n                //  console.log(filedata.arr.length);\n            } else {\n                console.log('// No user when getting profile');\n            }\n        });\n    }\n\n    async function saveProfileInfoToServer(theName, theInfo) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        let isNameChanged = theName ? true : false;\n        let isInfoChange = theInfo ? true : false;\n\n        if (user) {\n            /*console.log(\n                'saveProfileInfoToServer ',\n                isNameChanged,\n                isInfoChange\n            );*/\n            if (isNameChanged) {\n                await setDoc(\n                    doc(db, 'users', `${user.uid}`),\n                    {\n                        name: theName,\n                    },\n                    { merge: true }\n                );\n            }\n            if (isInfoChange) {\n                await setDoc(\n                    doc(db, 'users', `${user.uid}`),\n                    {\n                        info: theInfo,\n                    },\n                    { merge: true }\n                );\n            }\n        }\n    }\n\n    async function checkisFollowed(theuid) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        if (user) {\n            let locdoc = await getDoc(\n                doc(db, 'users', `${auth.currentUser.uid}`)\n            );\n            //console.log('docs in checkisfollowed', locdoc);\n            let following = locdoc.data().following;\n            //console.log('following in checkisfollowed', following);\n            following.forEach(async (item) => {\n                let theDoc = await getDoc(item);\n                let targetUid = theDoc.data().uid;\n                /* console.log(\n                    'theDoc.data().uid === theuid: ',\n                    targetUid === theuid,\n                    theuid,\n                    targetUid\n                );*/\n                if (targetUid === theuid) {\n                    setIsfollowed(true);\n                }\n            });\n        }\n    }\n\n    async function followTarget(theuid) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        if (user) {\n            await updateDoc(doc(db, 'users', `${auth.currentUser.uid}`), {\n                following: arrayUnion(doc(db, 'users', theuid)),\n            });\n        }\n    }\n\n    async function unfollowTarget(theuid) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        if (user) {\n            await updateDoc(doc(db, 'users', `${auth.currentUser.uid}`), {\n                following: arrayRemove(doc(db, 'users', theuid)),\n            });\n        }\n    }\n\n    async function savePostToserver(inputtext, imgblob) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        let theuid = user.uid;\n        //let input = inputtext;\n        let imgurl = 'default';\n        if (user) {\n            const imgstorageRef = ref(storage, `uploadedimages/${uuidv4()}`);\n            await uploadBytes(imgstorageRef, imgblob).then((snapshot) => {\n                // console.log('Uploaded a blob or file!', snapshot);\n                getDownloadURL(snapshot.ref).then(function (downloadURL) {\n                    console.log('File available at', downloadURL);\n                    imgurl = downloadURL;\n                    let randomPostId = uuidv4();\n                    setDoc(\n                        doc(db, 'users', `${theuid}`, 'post', randomPostId),\n                        {\n                            topic: inputtext,\n                            pic: imgurl,\n                            timestamp: serverTimestamp(),\n                            username: user.displayName,\n                            owneruser: doc(db, 'users', theuid),\n                            postid: randomPostId,\n                        },\n                        { merge: true }\n                    );\n                });\n            });\n            //await regetdataFromserver();\n        }\n\n        //console.log('savePostToserver ', inputtext);\n        //console.log('curuser', user);\n        //console.log('uid', user.uid);\n        //console.log('curuser.username', user.username);\n        //console.log('timestamp', serverTimestamp());\n        // console.log(theuid);\n    }\n\n    async function deletePostFromServer(path) {\n        // console.log(path);\n        const locDoc = doc(db, path);\n        await deleteDoc(locDoc);\n        // console.log('deletePostFromServer locDoc', locDoc);\n    }\n\n    async function saveCommentToServer(inputText, targetUid, targetPostId) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        let theuid = targetUid;\n        //let input = inputText;\n        //  console.log('saveCommentToServer ', inputText, targetPostId);\n        if (user) {\n            setDoc(\n                doc(\n                    collection(\n                        db,\n                        'users',\n                        `${theuid}`,\n                        'post',\n                        `${targetPostId}`,\n                        'comments'\n                    )\n                ),\n                {\n                    comment: inputText,\n                    owneruser: doc(db, 'users', auth.currentUser.uid),\n                    timestamp: serverTimestamp(),\n                    username: auth.currentUser.displayName,\n                },\n                { merge: true }\n            );\n\n            await regetdataFromserver();\n        }\n    }\n\n    async function createnewUserdata(theuid, email, fullname, username, pic) {\n        try {\n            await setDoc(doc(db, 'users', `${theuid}`), {\n                uid: theuid,\n                email: email,\n                fullname: fullname,\n                username: username,\n                avatar: pic,\n                followers: [], //uid\n                following: [],\n            });\n            /*\n            await setDoc(\n                doc(db, 'users', `${theuid}`, 'post'),\n                {\n                    topic: 'testing',\n                    pic: './images/pic01.jpg',\n                },\n                { merge: true }\n            );\n            */\n            setUsername(username);\n            console.log('Document written with ID: ');\n        } catch (e) {\n            console.error('Error adding document: ', e);\n        }\n    }\n    /*\n    function getdisplayName() {\n        const auth = getAuth();\n        const theuser = auth.currentUser;\n        if (theuser) return theuser.displayName;\n    }*/\n\n    async function onSubmitSignup(email, password, fullname, username, pic) {\n        const auth = getAuth();\n        createUserWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                // Signed in\n                const user = userCredential.user;\n                const theuid = userCredential.user.uid;\n                updateProfile(auth.currentUser, {\n                    displayName: username,\n                    photoURL:\n                        'https://firebasestorage.googleapis.com/v0/b/clonewebsite-eb6e6.appspot.com/o/avatardefault.svg?alt=media&token=acd38542-5ccb-48ff-97ee-10df1201725d', //default avatar\n                })\n                    .then(() => {\n                        // Profile updated!\n                        // ...\n                    })\n                    .catch((error) => {\n                        // An error occurred\n                        // ...\n                    });\n                setCuruser(user);\n                setDisplayname(fullname);\n                setUsername(username);\n                createnewUserdata(theuid, email, fullname, username, pic);\n                // ...\n            })\n            .catch((error) => {\n                //const errorCode = error.code;\n                //const errorMessage = error.message;\n                //console.log(error);\n                // ..\n            });\n    }\n    async function getUserinfo(usr) {\n        const auth = getAuth();\n        const user = auth.currentUser;\n        if (user !== null) {\n            // The user object has basic properties such as display name, email, etc.\n\n            // The user's ID, unique to the Firebase project. Do NOT use\n            // this value to authenticate with your backend server, if\n            // you have one. Use User.getToken() instead.\n\n            //getDataFromserver(usr);\n            await regetdataFromserver();\n        }\n    }\n\n    async function searchUserFromServer(keyword) {\n        const auth = getAuth();\n        // console.log(keyword);\n        if (auth) {\n            const usersRef = collection(db, 'users');\n            const res = query(\n                usersRef,\n                where('username', '>=', keyword),\n                where('username', '<=', keyword + '~')\n            );\n            const usersDocs = await getDocs(res);\n            //console.log('searchUserFromServer', usersDocs);\n            let userArr = [];\n            usersDocs.forEach((locDoc) => {\n                //console.log('locDoc', locDoc.data());\n                userArr.push(locDoc.data());\n            });\n            //console.log('search...', userArr);\n            return userArr; // FIXME server delay\n        }\n    }\n    async function onSubmitSignin(email, password) {\n        const auth = getAuth();\n        if (auth) {\n            auth.signOut();\n        }\n\n        let isLogedIn = false;\n        await signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                // Signed in\n                const user = userCredential.user;\n                // ...\n\n                (async () => {\n                    setCuruser(user);\n                    //console.log('onSubmitSignin ', curuser);\n                    setCuremail(email);\n                    //   console.log('insubmitsignin user', user);\n                    setDisplayname(user.displayName);\n                    setProfilepic(user.photoURL);\n                    setCuremail(user.email);\n                })();\n            })\n            .catch((error) => {\n                //const errorCode = error.code;\n                //const errorMessage = error.message;\n                //console.log(error);\n            });\n        /*\n        updateProfile(auth.currentUser, {\n            displayName: 'doejhon2',\n            photoURL:\n                'https://firebasestorage.googleapis.com/v0/b/clonewebsite-eb6e6.appspot.com/o/avatars%2Favatar02.jpg?alt=media&token=c5bee6f0-555d-4668-b89d-c68654e21604',\n        })\n            .then(() => {\n                // Profile updated!\n                // ...\n            })\n            .catch((error) => {\n                // An error occurred\n                // ...\n            });*/\n        return isLogedIn;\n    }\n    async function saveAvatartoserver(imgblob) {\n        const auth = getAuth();\n        const user = auth.currentUser;\n        if (user !== null) {\n            const imgstorageRef = ref(storage, `avatars/${uuidv4()}`);\n            //   console.log('imgstorageRef', imgblob);\n            await uploadBytes(imgstorageRef, imgblob).then((snapshot) => {\n                //    console.log('Uploaded a blob or file!', snapshot);\n                getDownloadURL(snapshot.ref).then(function (downloadURL) {\n                    //     console.log('File available at', downloadURL);\n                    updateProfile(auth.currentUser, {\n                        photoURL: downloadURL,\n                    })\n                        .then(() => {\n                            // Profile updated!\n                            /*   console.log(\n                                'now photo: ',\n                                auth.currentUser.photoURL\n                            );*/\n                            setDoc(\n                                doc(db, 'users', `${auth.currentUser.uid}`),\n                                {\n                                    avatar: auth.currentUser.photoURL,\n                                },\n                                { merge: true }\n                            );\n                        })\n                        .catch((error) => {\n                            // An error occurred\n                            // ...\n                        });\n                });\n            });\n            await regetdataFromserver();\n        }\n    }\n\n    async function defaultLogin() {\n        await onSubmitSignin('test1@test1.com', 'testtest');\n    }\n\n    function userLogout() {\n        const auth = getAuth();\n        auth.signOut();\n        //console.log(auth);\n        setCuruser(null);\n    }\n\n    async function fetchGroupByUserID(uid) {\n        const roomRef = collection(db, 'messageRoom');\n        const q = query(roomRef, where('members', 'array-contains', uid));\n        //const usersDocs = await getDocs(res);\n        //console.log(usersDocs);\n        let unsubscribe = onSnapshot(q, (querySnapshot) => {\n            const rooms = [];\n            querySnapshot.forEach(async (doc) => {\n                let members = doc.data().members;\n                let friendData = await fetchFriendInfo(members);\n                const data = {\n                    ...doc.data(),\n                    roomid: doc.ref.id,\n                    friendAvatar: friendData.avatar,\n                    friendName: friendData.username,\n                };\n                //if (data.recentMessage) rooms.push(data);\n                rooms.push(data);\n                setTimeout(() => {\n                    //console.log(rooms.length);\n                    setAllRooms(rooms);\n                }, 1000);\n            });\n        });\n        return unsubscribe;\n    }\n\n    async function fetchFriendInfo(arr) {\n        const auth = getAuth();\n        let friendId;\n        if (auth) {\n            let myUid = auth.currentUser.uid;\n            friendId = arr.filter((a) => a !== myUid);\n            setFriendId(friendId[0]);\n        }\n        //console.log('friendsId', friendId);\n        let data = await fetchInfoById(friendId[0]);\n        return data;\n    }\n\n    async function fetchInfoById(uid) {\n        const auth = getAuth();\n        if (auth) {\n            let locdoc = doc(db, 'users', `${uid}`); //, 'post'\n            // console.log(locdoc);\n            let locdata = (await getDoc(locdoc)).data();\n            let avatar = locdata.avatar; // avatar info under user's doc\n            //let info = locdata.info;\n            let nickName = locdata.name;\n            let username = locdata.username;\n            return { avatar: avatar, username: username, name: nickName };\n        }\n    }\n\n    async function fetchChatHistoryByRoom(roomid) {\n        const auth = getAuth();\n        setChatRoomId(roomid);\n        if (auth) {\n            let q = query(\n                collection(db, 'messages', `${roomid}`, 'submessage'),\n                orderBy('timestamp', 'asc')\n            );\n\n            let unsubscribe = onSnapshot(q, (querySnapshot) => {\n                const chatArr = [];\n                querySnapshot.forEach(async (snap) => {\n                    //  console.log(snap);\n                    let data = snap.data();\n                    let theUid = data.from;\n                    let pos = 1;\n                    if (theUid === auth.currentUser.uid) {\n                        pos = 0;\n                    }\n                    let time;\n                    if (data.timestamp) {\n                        let theDif =\n                            Math.round(Date.now() / 1000) -\n                            data.timestamp.seconds;\n                        if (theDif < 86400) {\n                            time = data.timestamp\n                                .toDate()\n                                .toString()\n                                .substring(16, 24);\n                        } else {\n                            time = data.timestamp\n                                .toDate()\n                                .toString()\n                                .substring(0, 15);\n                        }\n                    } else {\n                        time = '';\n                    }\n                    //console.log(data.timestamp.toDate().toLocaleTimeString());\n                    let newObj = {\n                        ...data,\n                        position: pos,\n                        time: time,\n                    };\n                    chatArr.push(newObj);\n                });\n                // console.log(chatArr);\n                setTimeout(() => {\n                    setChatHistory(chatArr);\n                }, 1000);\n            });\n            return unsubscribe;\n            //setChatUnsubscribe(unsubscribe);\n        }\n    }\n\n    async function postChatToServer(content) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        //console.log(content, chatRoomId);\n        const chatMsg = {\n            content: content,\n            from: user.uid,\n            timestamp: serverTimestamp(),\n        };\n        if (user) {\n            ///messages/s0IYEWn6SOQjFCze427R/submessage\n            setDoc(\n                doc(collection(db, 'messages', `${chatRoomId}`, 'submessage')),\n                chatMsg,\n                { merge: true }\n            );\n        }\n    }\n\n    async function createChatroomOnServer(target) {\n        const auth = getAuth();\n        let user = auth.currentUser;\n        let isCreatedBefore = false;\n        let friendUid = target.uid;\n        let members = {\n            members: [friendUid, user.uid],\n        };\n\n        const roomRef = collection(db, 'messageRoom');\n        let snap = query(roomRef, where('members', 'array-contains', members));\n        const usersDocs = await getDocs(snap);\n        if (!usersDocs.empty) {\n            isCreatedBefore = true;\n        }\n\n        if (!isCreatedBefore) {\n            if (user) {\n                //let username = target.username;\n\n                if (user) {\n                    ///messages/s0IYEWn6SOQjFCze427R/submessage\n                    let ref = await addDoc(\n                        collection(db, 'messageRoom'),\n                        members\n                    );\n                    let roomId = ref.id;\n                    setChatRoomId(roomId);\n                    setFriendId(friendUid);\n                    await fetchChatHistoryByRoom(roomId);\n                }\n            }\n        }\n        //console.log(target);\n    }\n\n    return (\n        <GlobalContext.Provider\n            value={{\n                isProfileMenuOpen,\n                setIsProfileMenuOpen,\n                isHomeClicked,\n                setIsHomeClicked,\n                onSubmitSignup,\n                onSubmitSignin,\n                createnewUserdata,\n                getUserinfo,\n                history,\n                curemail,\n                userLogout,\n                curuser,\n                //info,\n                isNewpostOpen,\n                setIsNewpostOpen,\n                displayname,\n                imgblob,\n                setImgblob,\n                savePostToserver,\n                getDataFromserver,\n                regetdataFromserver,\n                posts,\n                defaultLogin,\n                profilepic,\n                isusersignedin,\n                setIsusersignedin,\n                username,\n                useruid,\n                getprofileFromserver,\n                profiledata,\n                saveAvatartoserver,\n                messageButtonClicked,\n                setMessageButtonClicked,\n                checkLogin,\n                isfollowed,\n                setIsfollowed,\n                followTarget,\n                unfollowTarget,\n                checkisFollowed,\n                saveCommentToServer,\n                deletePostFromServer,\n                saveProfileInfoToServer,\n                searchUserFromServer,\n                fetchGroupByUserID, //unsubscribe\n                allRooms,\n                fetchFriendInfo,\n                chatHistory,\n                fetchChatHistoryByRoom, //unsubscribe\n                postChatToServer,\n                friendId,\n                chatRoomId,\n                createChatroomOnServer,\n            }}\n        >\n            {children}\n        </GlobalContext.Provider>\n    );\n};\n","import { Link } from 'react-router-dom';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext } from 'react';\n//import { useParams } from 'react-router-dom';\n\nfunction ProfileMenu() {\n    const {\n        userLogout,\n        history,\n        setIsHomeClicked,\n        setIsProfileMenuOpen,\n        username,\n        useruid,\n    } = useContext(GlobalContext);\n    function logout(e) {\n        e.preventDefault();\n        setIsHomeClicked(false);\n        userLogout();\n    }\n    function profileOnclick(e) {\n        e.preventDefault();\n        setIsProfileMenuOpen(false);\n        setIsHomeClicked(false);\n    }\n    //let { uname, uuid } = useParams();\n\n    const handleProceed = (e) => {\n        e.preventDefault();\n        //uname = username;\n        //uuid = useruid;\n        history.push(`/profile/${username}/${useruid}`);\n\n        //console.log(generatePath('/profile/:username', { username }));\n        // username &&\n        //    history.push(generatePath('/profile/:username', { username }));\n    };\n\n    return (\n        <div className=\"ProfileMenu\">\n            <div\n                className=\"profilemenuwrapper\"\n                onClick={(e) => profileOnclick(e)}\n            >\n                <span className=\"\"></span>\n                <div className=\"menuseparator\">\n                    <Link\n                        to={{\n                            pathname: `/profile/${username}/${useruid}`,\n                        }}\n                        onClick={(e) => handleProceed(e)}\n                    >\n                        Profile\n                    </Link>\n                </div>\n                <div>\n                    <Link to=\"/signin\">Sign in</Link>\n                </div>\n                <div>\n                    <Link to=\"/signup\">Sign up</Link>\n                </div>\n                <div>\n                    <Link to=\"/signout\" onClick={(e) => logout(e)}>\n                        Log out\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ProfileMenu;\n","import { GlobalContext } from '../context/GlobalState';\nimport React, { useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProfileMenu from '../components/ProfileMenu';\nfunction Iconmenu({ profilepic }) {\n    const {\n        isProfileMenuOpen,\n        setIsProfileMenuOpen,\n        isHomeClicked,\n        setIsHomeClicked,\n        isNewpostOpen,\n        setIsNewpostOpen,\n        history,\n        username,\n        regetdataFromserver,\n        messageButtonClicked,\n        setMessageButtonClicked,\n    } = useContext(GlobalContext);\n    function profilebtnonClick(e) {\n        e.preventDefault();\n        setIsProfileMenuOpen(!isProfileMenuOpen);\n    }\n\n    async function homebtnonClick(e) {\n        e.preventDefault();\n        //setIsHomeClicked(!isHomeClicked);\n        //  console.log('homebtnonClick');\n\n        setIsHomeClicked(true);\n        console.log(' setMessageButtonClicked(false);', messageButtonClicked);\n        setMessageButtonClicked(false);\n\n        await regetdataFromserver();\n        setIsProfileMenuOpen(false);\n        //console.log('IsHomeClicked', isHomeClicked);\n        history.push('/');\n    }\n    function newpostonClick(e) {\n        e.preventDefault();\n        setIsNewpostOpen(!isNewpostOpen);\n    }\n    function messageOnClick(e) {\n        e.preventDefault();\n        history.push('/message');\n        setIsHomeClicked(false);\n        setMessageButtonClicked(true);\n    }\n    return (\n        <div className=\"iconmenu\">\n            <div className=\"iconwrapper\">\n                <button tabIndex=\"0\" onClick={(e) => homebtnonClick(e)}>\n                    {/*FIXME: testing svg color switching*/}\n                    {isHomeClicked ? (\n                        <svg\n                            aria-label=\"Home\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"22\"\n                            role=\"img\"\n                            viewBox=\"0 0 48 48\"\n                            width=\"22\"\n                        >\n                            <path d=\"M45.5 48H30.1c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2.1-4.6-4.6-4.6s-4.6 2.1-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.6-.6 2.1 0l21.5 21.5c.3.3.4.7.4 1.1v23.5c.1.8-.6 1.5-1.4 1.5z\"></path>\n                        </svg>\n                    ) : (\n                        <svg\n                            aria-label=\"Home\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"22\"\n                            role=\"img\"\n                            viewBox=\"0 0 48 48\"\n                            width=\"22\"\n                        >\n                            <path d=\"M45.3 48H30c-.8 0-1.5-.7-1.5-1.5V34.2c0-2.6-2-4.6-4.6-4.6s-4.6 2-4.6 4.6v12.3c0 .8-.7 1.5-1.5 1.5H2.5c-.8 0-1.5-.7-1.5-1.5V23c0-.4.2-.8.4-1.1L22.9.4c.6-.6 1.5-.6 2.1 0l21.5 21.5c.4.4.6 1.1.3 1.6 0 .1-.1.1-.1.2v22.8c.1.8-.6 1.5-1.4 1.5zm-13.8-3h12.3V23.4L24 3.6l-20 20V45h12.3V34.2c0-4.3 3.3-7.6 7.6-7.6s7.6 3.3 7.6 7.6V45z\"></path>\n                        </svg>\n                    )}\n                </button>\n            </div>\n\n            <div className=\"iconwrapper\">\n                <Link\n                    to=\"/message\"\n                    tabIndex=\"0\"\n                    onClick={(e) => messageOnClick(e)}\n                >\n                    {!messageButtonClicked ? (\n                        <svg\n                            aria-label=\"Direct\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"22\"\n                            role=\"img\"\n                            viewBox=\"0 0 48 48\"\n                            width=\"22\"\n                        >\n                            <path d=\"M47.8 3.8c-.3-.5-.8-.8-1.3-.8h-45C.9 3.1.3 3.5.1 4S0 5.2.4 5.7l15.9 15.6 5.5 22.6c.1.6.6 1 1.2 1.1h.2c.5 0 1-.3 1.3-.7l23.2-39c.4-.4.4-1 .1-1.5zM5.2 6.1h35.5L18 18.7 5.2 6.1zm18.7 33.6l-4.4-18.4L42.4 8.6 23.9 39.7z\"></path>\n                        </svg>\n                    ) : (\n                        <svg\n                            aria-label=\"Direct\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"22\"\n                            role=\"img\"\n                            viewBox=\"0 0 48 48\"\n                            width=\"22\"\n                        >\n                            <path d=\"M47.8 3.8c-.3-.5-.8-.8-1.3-.8h-45C.9 3.1.3 3.5.1 4S0 5.2.4 5.7l13.2 13c.5.4 1.1.6 1.7.3l16.6-8c.7-.3 1.6-.1 2 .5.4.7.2 1.6-.5 2l-15.6 9.9c-.5.3-.8 1-.7 1.6l4.6 19c.1.6.6 1 1.2 1.1h.2c.5 0 1-.3 1.3-.7l23.2-39c.5-.5.5-1.1.2-1.6z\"></path>\n                        </svg>\n                    )}\n                </Link>\n            </div>\n            <div className=\"iconwrapper\">\n                <button\n                    className=\"addpostbtn\"\n                    type=\"button\"\n                    onClick={(e) => newpostonClick(e)}\n                >\n                    <div>\n                        <svg\n                            aria-label=\"New Post\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"22\"\n                            role=\"img\"\n                            viewBox=\"0 0 48 48\"\n                            width=\"22\"\n                        >\n                            <path d=\"M31.8 48H16.2c-6.6 0-9.6-1.6-12.1-4C1.6 41.4 0 38.4 0 31.8V16.2C0 9.6 1.6 6.6 4 4.1 6.6 1.6 9.6 0 16.2 0h15.6c6.6 0 9.6 1.6 12.1 4C46.4 6.6 48 9.6 48 16.2v15.6c0 6.6-1.6 9.6-4 12.1-2.6 2.5-5.6 4.1-12.2 4.1zM16.2 3C10 3 7.8 4.6 6.1 6.2 4.6 7.8 3 10 3 16.2v15.6c0 6.2 1.6 8.4 3.2 10.1 1.6 1.6 3.8 3.1 10 3.1h15.6c6.2 0 8.4-1.6 10.1-3.2 1.6-1.6 3.1-3.8 3.1-10V16.2c0-6.2-1.6-8.4-3.2-10.1C40.2 4.6 38 3 31.8 3H16.2z\"></path>\n                            <path d=\"M36.3 25.5H11.7c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5h24.6c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5z\"></path>\n                            <path d=\"M24 37.8c-.8 0-1.5-.7-1.5-1.5V11.7c0-.8.7-1.5 1.5-1.5s1.5.7 1.5 1.5v24.6c0 .8-.7 1.5-1.5 1.5z\"></path>\n                        </svg>\n                    </div>\n                </button>\n            </div>\n            <div className=\"iconwrapper\">\n                <button\n                    className=\"profilebtn\"\n                    type=\"button\"\n                    onClick={(e) => profilebtnonClick(e)}\n                >\n                    {profilepic === undefined ? (\n                        <svg\n                            aria-label=\"Profile\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"16\"\n                            role=\"img\"\n                            viewBox=\"0 0 32 32\"\n                            width=\"16\"\n                        >\n                            <path d=\"M16 0C7.2 0 0 7.1 0 16c0 4.8 2.1 9.1 5.5 12l.3.3C8.5 30.6 12.1 32 16 32s7.5-1.4 10.2-3.7l.3-.3c3.4-3 5.5-7.2 5.5-12 0-8.9-7.2-16-16-16zm0 29c-2.8 0-5.3-.9-7.5-2.4.5-.9.9-1.3 1.4-1.8.7-.5 1.5-.8 2.4-.8h7.2c.9 0 1.7.3 2.4.8.5.4.9.8 1.4 1.8-2 1.5-4.5 2.4-7.3 2.4zm9.7-4.4c-.5-.9-1.1-1.5-1.9-2.1-1.2-.9-2.7-1.4-4.2-1.4h-7.2c-1.5 0-3 .5-4.2 1.4-.8.6-1.4 1.2-1.9 2.1C4.2 22.3 3 19.3 3 16 3 8.8 8.8 3 16 3s13 5.8 13 13c0 3.3-1.2 6.3-3.3 8.6zM16 5.7c-3.9 0-7 3.1-7 7s3.1 7 7 7 7-3.1 7-7-3.1-7-7-7zm0 11c-2.2 0-4-1.8-4-4s1.8-4 4-4 4 1.8 4 4-1.8 4-4 4z\"></path>\n                        </svg>\n                    ) : (\n                        <img src={profilepic} alt=\"\" />\n                    )}\n                    <div></div>\n                </button>\n            </div>\n            {isProfileMenuOpen ? <ProfileMenu username={username} /> : ''}\n        </div>\n    );\n}\n\nexport default Iconmenu;\n","import instagram from '../images/instagram.png';\nimport Iconmenu from './Iconmenu';\nimport '../style/Header.css';\nimport { Link } from 'react-router-dom';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useEffect, useState } from 'react';\n\nfunction Header() {\n    const {\n        profilepic,\n        history,\n        setIsHomeClicked,\n        setIsProfileMenuOpen,\n        searchUserFromServer,\n        setMessageButtonClicked,\n    } = useContext(GlobalContext);\n    // console.log('indeader profilepic', profilepic);\n    const [isSearchOpen, setIsSearchOpen] = useState(false); //FIXME change back to false\n    //let keyword = '';\n    const [keyword, setKeyword] = useState('');\n    const [searchResult, setSearchResult] = useState([]);\n    const handleProceed = (e, link) => {\n        e.preventDefault();\n\n        history.push(link);\n    };\n    function homebtnonClick(e) {\n        e.preventDefault();\n        setIsHomeClicked(true);\n        setIsProfileMenuOpen(false);\n        setMessageButtonClicked(false);\n        history.push('/');\n    }\n    function searchOnFocus(e) {\n        e.preventDefault();\n        setIsSearchOpen(true);\n    }\n    function searchOnBlur(e) {\n        e.preventDefault();\n        setIsSearchOpen(false); //FIXME change back to false\n    }\n    async function searchOnEnter() {\n        //console.log(keyword);\n        if (keyword !== '') {\n            let arr = await searchUserFromServer(keyword);\n            console.log(arr);\n            setSearchResult(arr);\n        }\n    }\n    useEffect(() => {\n        // console.log('searching');\n    }, [searchResult]);\n    // onBlur={(e) => searchOnBlur(e)}\n    return (\n        <div className=\"Header\">\n            <div className=\"Headerimgwrapper\">\n                <img\n                    className=\"Headerimg\"\n                    src={instagram}\n                    alt=\"\"\n                    onClick={(e) => homebtnonClick(e)}\n                />\n            </div>\n            <div className=\"searchBox\">\n                <input\n                    type=\"text\"\n                    placeholder=\"Search\"\n                    onFocus={(e) => searchOnFocus(e)}\n                    onBlur={(e) => searchOnBlur(e)}\n                    onChange={(e) => {\n                        setKeyword(e.target.value);\n                    }}\n                    onKeyDown={(e) => {\n                        if (e.code === 'Enter') {\n                            e.preventDefault();\n                            searchOnEnter();\n                        }\n                    }}\n                />\n                {isSearchOpen ? (\n                    <div className=\"searchResultWrapper\">\n                        <div className=\"searchResultWrapperHeader\">Result</div>\n                        <div className=\"searchResultContainer\">\n                            {searchResult.map((resUser) => (\n                                <div className=\"resLineContainer\">\n                                    <div>\n                                        <img src={resUser.avatar} alt=\"\" />\n                                    </div>\n\n                                    <Link\n                                        to={{\n                                            pathname: `/profile/${resUser.username}/${resUser.uid}`,\n                                        }}\n                                        onMouseDown={(e) =>\n                                            handleProceed(\n                                                e,\n                                                `/profile/${resUser.username}/${resUser.uid}`\n                                            )\n                                        }\n                                    >\n                                        @{resUser.username}&nbsp;\n                                    </Link>\n                                    <strong>{resUser.name}</strong>\n                                </div>\n                            ))}\n                        </div>\n                        {/**/}\n                    </div>\n                ) : (\n                    <div></div>\n                )}\n            </div>\n            <Iconmenu profilepic={profilepic} />\n        </div>\n    );\n}\n\nexport default Header;\n","import { useState } from 'react';\n\nconst DropdownButton = ({\n    handleDeleteOnPost,\n    handleThreePtClicked,\n    isOwner,\n}) => {\n    const [isMenuOpen, setIsMenuOpen] = useState(false);\n    const handleClicked = (e) => {\n        e.preventDefault();\n        setIsMenuOpen(!isMenuOpen);\n        // console.log(e);\n        //console.log('isOwner?', isOwner);\n    };\n    const deleteOnClick = (e) => {\n        e.preventDefault();\n        handleDeleteOnPost();\n    };\n    return (\n        <div className=\"dropdownBtnWrapper\">\n            <button\n                className=\"threePtButton\"\n                onClick={(e) => {\n                    handleClicked(e);\n                }}\n            >\n                <svg\n                    aria-label=\"More options\"\n                    color=\"#262626\"\n                    fill=\"#262626\"\n                    height=\"24\"\n                    role=\"img\"\n                    viewBox=\"0 0 24 24\"\n                    width=\"24\"\n                >\n                    <circle cx=\"12\" cy=\"12\" r=\"1.5\"></circle>\n                    <circle cx=\"6.5\" cy=\"12\" r=\"1.5\"></circle>\n                    <circle cx=\"17.5\" cy=\"12\" r=\"1.5\"></circle>\n                </svg>\n            </button>\n            {isOwner ? (\n                <div className={isMenuOpen ? 'active' : 'hidden'}>\n                    <button\n                        className=\"deleteButton\"\n                        onClick={(e) => {\n                            deleteOnClick(e);\n                        }}\n                    >\n                        Delete\n                    </button>\n                </div>\n            ) : (\n                <div></div>\n            )}\n        </div>\n    );\n};\n\nexport default DropdownButton;\n","import { Link } from 'react-router-dom';\nimport { useContext, useState, useEffect } from 'react';\nimport { GlobalContext } from '../context/GlobalState';\nimport { v4 as uuidv4 } from 'uuid';\nimport DropdownButton from './DropdownButton';\nconst Post = ({\n    topic,\n    timestamp,\n    pic,\n    postid,\n    username,\n    avatar,\n    useruid,\n    comments,\n    post,\n    handleShowDetail,\n}) => {\n    const {\n        history,\n        saveCommentToServer,\n        displayname,\n        deletePostFromServer,\n        regetdataFromserver,\n    } = useContext(GlobalContext);\n    // const [threePtClicked, setThreePtClicked] = useState(false);\n    const [isOwner, setIsOwner] = useState(false);\n    const [isPostDeleted, setIsPostDeleted] = useState(false);\n    //let { uname, uuid } = useParams();\n    const handleProceed = (e, link) => {\n        e.preventDefault();\n        // uname = username;\n        // uuid = useruid;\n        history.push(link);\n\n        //console.log(generatePath('/profile/:username', { username }));\n        // username &&\n        //    history.push(generatePath('/profile/:username', { username }));\n    };\n    useEffect(() => {\n        if (displayname === post.username) {\n            setIsOwner(true);\n        }\n    }, [displayname, post.username]);\n    let comment = '';\n    function postOnClick(e) {\n        e.preventDefault();\n        if (comment !== '') {\n            saveCommentToServer(comment, useruid, postid);\n        }\n    }\n    function viewPost(e, data) {\n        e.preventDefault();\n        handleShowDetail(data);\n    }\n    //console.log('in Post comments', comments);\n    /*\n    function handleThreePtClicked() {\n        console.log();\n    }*/\n    async function handleDeleteOnPost() {\n        let path = `/users/${post.uuid}/post/${postid}`;\n        await deletePostFromServer(path);\n        await regetdataFromserver();\n        setIsPostDeleted(true);\n    }\n    function cmtRender(cmt) {\n        let cmtUid = cmt.owneruser.path.substring(6);\n        return (\n            <div key={uuidv4()}>\n                <Link\n                    to={{\n                        pathname: `/profile/${cmt.username}/${cmtUid}`,\n                    }}\n                    onClick={(e) =>\n                        handleProceed(e, `/profile/${cmt.username}/${cmtUid}`)\n                    }\n                >\n                    <strong> {cmt.username}</strong>\n                </Link>\n                &nbsp; {cmt.comment}\n            </div>\n        );\n    }\n\n    return (\n        <div\n            className={\n                !isPostDeleted ? 'postcontainer' : 'postcontainer hidden'\n            }\n        >\n            <div className=\"postHeader\">\n                <div className=\"authorName\">\n                    <div className=\"authorimgcontainer\">\n                        <img src={avatar} alt=\"\" />\n                    </div>\n                    <Link\n                        to={{\n                            pathname: `/profile/${username}/${useruid}`,\n                        }}\n                        onClick={(e) =>\n                            handleProceed(e, `/profile/${username}/${useruid}`)\n                        }\n                    >\n                        <strong>{username}</strong>\n                    </Link>\n                </div>\n                <DropdownButton\n                    handleDeleteOnPost={handleDeleteOnPost}\n                    isOwner={isOwner}\n                />\n            </div>\n            <div className=\"postimgcontainer\">\n                <Link to=\"#\" onClick={(e) => viewPost(e, post)}>\n                    <img className=\"postsimg\" src={pic} alt=\"\" />\n                </Link>\n            </div>\n            <div className=\"postscoments\">\n                <div>\n                    <Link\n                        to={{\n                            pathname: `/profile/${username}/${useruid}`,\n                        }}\n                        onClick={(e) =>\n                            handleProceed(e, `/profile/${username}/${useruid}`)\n                        }\n                    >\n                        <strong>{username}</strong>\n                    </Link>\n                    &nbsp;{topic}\n                </div>\n                <div className=\"allCommentsLink\">\n                    <Link to=\"#\" onClick={(e) => viewPost(e, post)}>\n                        View all comments\n                    </Link>\n                </div>\n\n                <div className=\"commentsWrapper\">\n                    {comments.map((cmt) => cmtRender(cmt))}\n                </div>\n                <div className=\"posttime\">{timestamp}</div>\n                <div className=\"postCmtContainer\">\n                    <input\n                        type=\"text\"\n                        placeholder=\"Add a comment...\"\n                        onChange={(e) => (comment = e.target.value)}\n                    />\n                    <a href=\"/#\" onClick={(e) => postOnClick(e)}>\n                        Post\n                    </a>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Post;\n","import '../style/Posts.css';\nimport './Post';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext } from 'react';\nimport Post from './Post';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst Posts = ({ handleShowDetail }) => {\n    //let time = '';\n    const { posts } = useContext(GlobalContext);\n    /*async function defLogin() {\n        defaultLogin();\n    }*/\n    /*\n    useEffect(() => {\n        console.log('posts changed', posts);\n    }, [posts]);*/\n\n    //  console.log('in posts', posts);\n    const postRender = (post) => {\n        //  console.log('post under map', post);\n        let locComments = post.comments;\n        if (locComments !== [] && locComments.length > 2) {\n            locComments = [locComments[0], locComments[1]];\n        }\n        return (\n            <Post\n                post={post}\n                author={post.author}\n                username={post.username}\n                topic={post.topic}\n                timestamp={\n                    post.timestamp === null\n                        ? Date.now().toString().substring(0, 15)\n                        : post.timestamp.toDate().toString().substring(0, 15)\n                }\n                pic={post.pic}\n                key={uuidv4()}\n                avatar={post.avatar}\n                useruid={post.uuid}\n                postid={post.postid}\n                comments={locComments}\n                handleShowDetail={handleShowDetail}\n            />\n        );\n    };\n    if (posts !== undefined) {\n        return (\n            <div className=\"posts\">{posts.map((post) => postRender(post))}</div>\n        );\n    } else {\n        return <div className=\"posts\"></div>;\n    }\n};\n\nexport default Posts;\n","export default __webpack_public_path__ + \"static/media/noimg.190fa575.svg\";","import React, { useContext, useState } from 'react';\nimport { GlobalContext } from '../context/GlobalState';\nimport { Link } from 'react-router-dom';\nimport '../style/Newpost.css';\nimport { default as noimg } from '../images/noimg.svg';\n\nconst Newpost = () => {\n    const {\n        isNewpostOpen,\n        setIsNewpostOpen,\n        displayname,\n        setImgblob,\n        imgblob,\n        savePostToserver,\n        regetdataFromserver,\n    } = useContext(GlobalContext);\n\n    const [previewimg, setPreviewimg] = useState(noimg);\n\n    //  console.log('in Newpost displayname', displayname);\n    let loctext = '';\n    const onSelectChange = (e) => {\n        e.preventDefault();\n        //  console.log(window.URL.createObjectURL(e.target.files[0]));\n        if (e.target.files.length !== 0) {\n            setPreviewimg(window.URL.createObjectURL(e.target.files[0]));\n        }\n        setImgblob(e.target.files[0]);\n    };\n    const onCloseClick = (e) => {\n        e.preventDefault();\n        setIsNewpostOpen(!isNewpostOpen);\n    };\n\n    const savePost = async (e) => {\n        e.preventDefault();\n        //  console.log(loctext, imgblob);\n        await savePostToserver(loctext, imgblob);\n        setIsNewpostOpen(false);\n        //  console.log('regetdataFromserver 1');\n        setTimeout(async () => await regetdataFromserver(), 3000); // delay 3s for server to response FIXME\n        //   console.log('regetdataFromserver 5');\n    };\n    function selectbtnonClick(e) {\n        e.preventDefault();\n        document.getElementById('getFile').click();\n    }\n\n    return (\n        <div className={isNewpostOpen ? 'newpost' : 'newpost newpostHidden'}>\n            <div className=\"newpostHeader\">\n                <div>Create new post</div>\n                <div>\n                    <Link to=\"/\" onClick={(e) => savePost(e)}>\n                        Share\n                    </Link>\n                    <button\n                        type=\"button\"\n                        onClick={(e) => onCloseClick(e)}\n                        className=\"closebtn\"\n                    >\n                        ✖\n                    </button>\n                </div>\n            </div>\n            <div className=\"postform\">\n                <div className=\"postimg\">\n                    <img src={previewimg} alt=\"\" />\n                    <button\n                        className=\"file-upload-button\"\n                        onClick={(e) => selectbtnonClick(e)}\n                    >\n                        Select from computer\n                    </button>\n\n                    <input\n                        type=\"file\"\n                        id=\"getFile\"\n                        onChange={(e) => onSelectChange(e)}\n                        style={{ display: 'none' }}\n                    />\n                </div>\n                <div className=\"postinfo\">\n                    <p>\n                        <strong>{displayname}</strong>\n                    </p>\n\n                    <div className=\"posttext\">\n                        <textarea\n                            rows=\"8\"\n                            cols=\"30\"\n                            placeholder=\"Write a caption...\"\n                            onChange={(e) => (loctext = e.target.value)}\n                            required\n                        />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Newpost;\n","import '../style/Signup.css';\nimport instagram from '../images/instagram.png';\nimport { Link } from 'react-router-dom';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext } from 'react';\n\nfunction Signin() {\n    const { onSubmitSignin, history, setIsHomeClicked } =\n        useContext(GlobalContext);\n    let email = '';\n    let password = '';\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        setIsHomeClicked(true);\n        await onSubmitSignin(email, password);\n        /*if (await onSubmitSignin(email, password)) {\n            await getUserinfo();\n        }*/\n        history.push('/');\n    }\n    return (\n        <div className=\"signup\">\n            <div className=\"signupcontainer\">\n                <div>\n                    <img src={instagram} alt=\"\" />\n                </div>\n\n                <form\n                    className=\"sigupform\"\n                    onSubmit={(e) => {\n                        onSubmit(e);\n                    }}\n                >\n                    <input\n                        className=\"inputbox\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={(event) => {\n                            email = event.target.value;\n                        }}\n                        required\n                    />\n\n                    <input\n                        className=\"inputbox\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={(event) => {\n                            password = event.target.value;\n                        }}\n                        required\n                    />\n                    <input\n                        className=\"sigupformbutton\"\n                        type=\"submit\"\n                        value=\"Log in\"\n                    />\n                </form>\n                <div style={{ fontSize: '0.7em' }}>\n                    <p>Forgot password?</p>\n                    (Don't use any real username & password) (test account:\n                    test1@test1.com:testtest)\n                </div>\n                <div className=\"bottomBox\">\n                    Don't have an account? <Link to=\"/signup\">Sign up</Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Signin;\n","import { Link } from 'react-router-dom';\nimport DropdownButton from './DropdownButton';\n\nconst PostDetailHeader = ({\n    avatar,\n    handleProceed,\n    username,\n    postUid,\n    isOwner,\n    handleThreePtClicked,\n    handleDeleteOnPost,\n    onCloseClick,\n}) => {\n    return (\n        <div className=\"commentHeader\">\n            <div className=\"avatarContainer\">\n                <img src={avatar} alt=\"\" />\n\n                <div>\n                    <Link\n                        to={{\n                            pathname: `/profile/${username}/${postUid}`,\n                        }}\n                        onClick={(e) =>\n                            handleProceed(e, `/profile/${username}/${postUid}`)\n                        }\n                    >\n                        <strong>{username}</strong>\n                    </Link>\n                </div>\n            </div>\n\n            <div className=\"buttonContainer\">\n                <div className=\"detailButton\">\n                    <DropdownButton\n                        isOwner={isOwner}\n                        onClick={() => {\n                            handleThreePtClicked();\n                        }}\n                        handleDeleteOnPost={handleDeleteOnPost}\n                    />\n                </div>\n                <div>\n                    <button\n                        type=\"button\"\n                        onClick={(e) => onCloseClick(e)}\n                        className=\"closebtn\"\n                    >\n                        ✖\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default PostDetailHeader;\n","import '../style/Signup.css';\nimport { Link } from 'react-router-dom';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useState, useEffect } from 'react';\nimport '../style/PostDetail.css';\nimport { v4 as uuidv4 } from 'uuid';\nimport DropdownButton from './DropdownButton';\nimport PostDetailHeader from './PostDetailHeader';\n\nfunction Postdetail({ post, setIsPostDetailOpen, isPostDetailOpen }) {\n    const [isOwner, setIsOwner] = useState(false);\n    const {\n        history,\n        regetdataFromserver,\n        saveCommentToServer,\n        displayname,\n        deletePostFromServer,\n    } = useContext(GlobalContext);\n\n    useEffect(() => {\n        if (displayname === post.username) {\n            setIsOwner(true);\n        }\n    }, [displayname, post.username]);\n\n    function onCloseClick(e) {\n        e.preventDefault();\n        setIsPostDetailOpen(!isPostDetailOpen);\n    }\n    let comment = '';\n    async function postOnClick(e) {\n        e.preventDefault();\n        if (comment !== '') {\n            await saveCommentToServer(comment, post.uuid, post.postid);\n            await regetdataFromserver();\n        }\n    }\n\n    const handleProceed = (e, link) => {\n        e.preventDefault();\n\n        history.push(link);\n    };\n    let postUid = post.owneruser.path.substring(6);\n    //console.log('in post detail ', post);\n    function handleThreePtClicked() {\n        console.log();\n    }\n    async function handleDeleteOnPost() {\n        let path = `/users/${post.uuid}/post/${post.postid}`;\n        await deletePostFromServer(path);\n        //history.push('/');\n        setIsPostDetailOpen(false);\n    }\n    return (\n        <div className=\"PostDetail\">\n            <div className=\"detailImgContainer desktopPostDetailImg\">\n                <img src={post.pic} alt=\"\" />\n            </div>\n            <div className=\"commentContainer\">\n                <PostDetailHeader\n                    avatar={post.avatar}\n                    username={post.username}\n                    uid={postUid}\n                    isOwner={isOwner}\n                    handleThreePtClicked={handleThreePtClicked}\n                    onCloseClick={onCloseClick}\n                    handleDeleteOnPost={handleDeleteOnPost}\n                />\n                <div className=\"detailImgContainer mobilePostDetailImg\">\n                    <img src={post.pic} alt=\"\" />\n                </div>\n                <div className=\"commentsDisplay\">\n                    <div className=\"singleCmt\">\n                        <div className=\"avatarContainer\">\n                            <img src={post.avatar} alt=\"\" />\n                            <Link\n                                to={{\n                                    pathname: `/profile/${post.username}/${postUid}`,\n                                }}\n                                onClick={(e) =>\n                                    handleProceed(\n                                        e,\n                                        `/profile/${post.username}/${post.uuid}`\n                                    )\n                                }\n                            >\n                                <strong>{post.username}&nbsp;</strong>\n                            </Link>\n                        </div>\n                        <div>{post.topic}</div>\n                    </div>\n                    <div className=\"commentsWrapper\">\n                        {post.comments.map((cmt) => {\n                            // console.log('commentsDisplay', cmt);\n                            let cmtUid = cmt.owneruser.path.substring(6);\n                            return (\n                                <div className=\"singleCmt\" key={uuidv4()}>\n                                    <div className=\"avatarContainer\">\n                                        <img src={cmt.avatar} alt=\"\" />\n                                        <Link\n                                            to={{\n                                                pathname: `/profile/${cmt.username}/${postUid}`,\n                                            }}\n                                            onClick={(e) =>\n                                                handleProceed(\n                                                    e,\n                                                    `/profile/${cmt.username}/${cmtUid}`\n                                                )\n                                            }\n                                        >\n                                            <strong>\n                                                {cmt.username}&nbsp;\n                                            </strong>\n                                        </Link>\n                                    </div>\n                                    <div>{cmt.comment}</div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n                <div className=\"detailCmtContainer\">\n                    <input\n                        type=\"text\"\n                        placeholder=\"Add a comment...\"\n                        onChange={(e) => (comment = e.target.value)}\n                    />\n                    <a href=\"/#\" onClick={(e) => postOnClick(e)}>\n                        Post\n                    </a>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Postdetail;\n","import Header from '../components/Header';\nimport Posts from '../components/Posts';\nimport Newpost from './Newpost';\nimport '../style/Home.css';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useEffect, useState } from 'react';\nimport Signin from './Signin';\nimport PostDetail from './PostDetail';\nfunction Home(props) {\n    const { regetdataFromserver, posts, history, isusersignedin, checkLogin } =\n        useContext(GlobalContext);\n    const [isPostDetailOpen, setIsPostDetailOpen] = useState(false);\n    const [detailData, setDetailData] = useState();\n    //const [locPosts, setLocPosts] = useState();\n    /*\n    async function onclickgetdata(e) {\n        e.preventDefault();\n\n        if (posts === undefined) {\n            await defaultLogin();\n        }\n        await getDataFromserver(curuser);\n    }*/\n    /*\n    useEffect(() => {\n        (async () => {\n            if (isusersignedin) {\n                console.log('isusersignedin changed', isusersignedin);\n                regetdataFromserver();\n            } else {\n                history.push('/signin');\n            }\n        })();\n    }, []);\n    */\n\n    // console.log('inhome posts', posts);\n    useEffect(() => {\n        // console.log('inhome useEffect');\n        async function fetchData() {\n            // You can await here\n            let response = await checkLogin();\n            // ...\n            return response;\n        }\n        fetchData().then(async (response) => {\n            // (async () =>await new Promise((resolve) => setTimeout(resolve, 1000)))(); //inline delayer\n            if (response) {\n                // console.log('user signed in , fetchdata', response);\n                regetdataFromserver();\n                //history.go(0);\n            } else {\n                // console.log('user not signed in ', response);\n                history.push('/signin');\n            }\n        });\n        //return regetdataFromserver();\n        //[isusersignedin]);\n    }, [isusersignedin]); //FIXME infinite loop\n\n    /*function setDetailOpen() {\n        setIsPostDetailOpen(!isPostDetailOpen);\n        // console.log('isPostDetailOpen', isPostDetailOpen);\n    }*/\n    function handleShowDetail(data) {\n        setIsPostDetailOpen(!isPostDetailOpen);\n        setDetailData(data);\n        //console.log('handleShowDetail', data);\n    }\n    //console.log('posts in home', posts);\n    //console.log('posts.length in home', posts.length);\n    if (posts !== undefined) {\n        return (\n            <div>\n                <Header />\n                <div className=\"Home\">\n                    <Newpost />\n                    {isPostDetailOpen ? (\n                        <PostDetail\n                            post={detailData}\n                            setIsPostDetailOpen={setIsPostDetailOpen}\n                            isPostDetailOpen={isPostDetailOpen}\n                        />\n                    ) : (\n                        <div></div>\n                    )}\n                    <Posts handleShowDetail={handleShowDetail} />\n                </div>\n            </div>\n        );\n    } else {\n        console.log('posts is undefined');\n        return (\n            <div>\n                <Signin />\n            </div>\n        );\n    }\n}\n\nexport default Home;\n","import '../style/Signup.css';\nimport instagram from '../images/instagram.png';\nimport { Link } from 'react-router-dom';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext } from 'react';\nfunction Signup() {\n    const { onSubmitSignup, history } = useContext(GlobalContext);\n\n    let email = '';\n    let fullname = '';\n    let username = '';\n    let password = '';\n\n    async function onSubmit(e) {\n        e.preventDefault();\n        await onSubmitSignup(\n            email,\n            password,\n            fullname,\n            username,\n            'https://firebasestorage.googleapis.com/v0/b/clonewebsite-eb6e6.appspot.com/o/avatardefault.svg?alt=media&token=acd38542-5ccb-48ff-97ee-10df1201725d'\n        );\n        history.push('/signin');\n    }\n\n    return (\n        <div className=\"signup\">\n            <div className=\"signupcontainer\">\n                <div>\n                    <img src={instagram} alt=\"\" />\n                </div>\n                <div>Sign up to see photos and videos from your friends.</div>\n\n                <form\n                    className=\"sigupform\"\n                    onSubmit={(e) => {\n                        onSubmit(e);\n                    }}\n                >\n                    <input\n                        className=\"inputbox\"\n                        type=\"email\"\n                        placeholder=\"Email\"\n                        onChange={(event) => {\n                            email = event.target.value;\n                        }}\n                        required\n                    />\n                    <input\n                        className=\"inputbox\"\n                        type=\"text\"\n                        placeholder=\"Full Name\"\n                        onChange={(event) => {\n                            fullname = event.target.value;\n                        }}\n                        required\n                    />\n                    <input\n                        className=\"inputbox\"\n                        type=\"text\"\n                        placeholder=\"User Name\"\n                        onChange={(event) => {\n                            username = event.target.value;\n                        }}\n                        required\n                    />\n                    <input\n                        className=\"inputbox\"\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        onChange={(event) => {\n                            password = event.target.value;\n                        }}\n                        required\n                    />\n                    <input\n                        className=\"sigupformbutton\"\n                        type=\"submit\"\n                        value=\"Sign up\"\n                    />\n                </form>\n                <div style={{ fontSize: '0.7em' }}>\n                    <p>\n                        By signing up, you agree to our Terms , Data Policy and\n                        Cookies Policy . (Don't use any real username &\n                        password)\n                    </p>\n                </div>\n                <div className=\"bottomBox\">\n                    Have an account? <Link to=\"/signin\">Log in</Link>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Signup;\n","import '../style/Profile.css';\nimport Newpost from './Newpost';\nimport Header from './Header';\nimport PostDetail from './PostDetail';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nfunction Profile(props) {\n    const {\n        history,\n        isusersignedin,\n        getprofileFromserver,\n        profiledata,\n        setImgblob,\n        imgblob,\n        saveAvatartoserver,\n        isfollowed,\n        followTarget,\n        unfollowTarget,\n        checkisFollowed,\n        saveProfileInfoToServer,\n        displayname,\n    } = useContext(GlobalContext);\n\n    //const [profileUsersignedin, setProfileUsersignedin] = useState(false);\n    const [ischangingavatar, setIschangingavatar] = useState(false);\n    const [locIsFollowed, setLocIsFollowed] = useState(true);\n    const [isPostDetailOpen, setIsPostDetailOpen] = useState(false);\n    const [detailData, setDetailData] = useState();\n    const [editingInfo, setEditingInfo] = useState(false);\n    const [isProfileowner, setIsProfileowner] = useState(false);\n    let nickName = '';\n    let information = '';\n    //console.log('inprofile', props);\n    useEffect(() => {\n        async function fetchData() {\n            if (isusersignedin) {\n                if (displayname === props.username) {\n                    setIsProfileowner(true);\n                } else {\n                    setIsProfileowner(false);\n                }\n                // console.log('isusersignedin changed', isusersignedin);\n                await getprofileFromserver(props.uuid).then(() => {\n                    /* console.log(\n                        'profiledata in getprofileFromserver',\n                        profiledata\n                    );*/\n                });\n                await checkisFollowed(props.uuid);\n                if (isfollowed) {\n                    setLocIsFollowed(true);\n                } else {\n                    setLocIsFollowed(false);\n                }\n\n                // console.log('locIsFollowed isfollowed', locIsFollowed);\n            } else {\n                history.push('/signin');\n            }\n        }\n        fetchData();\n\n        //console.log('isfollowed', isfollowed);\n        //[props, isfollowed, isusersignedin, isProfileowner]);\n    }, [props, isfollowed, isusersignedin, isProfileowner]); //FIXME infinite loop\n\n    /*\n    useEffect(() => {\n        const testauth = getAuth().onAuthStateChanged(function (user) {\n            if (user) {\n                setProfileUsersignedin(true);\n                console.log('User is signed in', user);\n                console.log('isusersignedin?', profileUsersignedin);\n                regetdataFromserver();\n            } else {\n                setProfileUsersignedin(false);\n                console.log('// No user is signed in.');\n            }\n        });\n    }, [profileUsersignedin, regetdataFromserver]);\n*/\n    //let loctext = '';\n\n    const [previewimg, setPreviewimg] = useState();\n    const onSelectChange = async (e) => {\n        e.preventDefault();\n        setIschangingavatar(true);\n        if (e.target.files.length !== 0) {\n            setPreviewimg(window.URL.createObjectURL(e.target.files[0]));\n        }\n        setImgblob(e.target.files[0]);\n    };\n\n    function selectbtnonClick(e) {\n        e.preventDefault();\n        document.getElementById('getavatarFile').click();\n    }\n\n    async function onsavebtnOnclicked(e) {\n        console.log(imgblob);\n        await saveAvatartoserver(imgblob);\n        //setIschangingavatar(false);\n    }\n    function unfollowOnClicked(e) {\n        e.preventDefault();\n        //e.currentTarget.disabled = true;\n        unfollowTarget(props.uuid);\n        setLocIsFollowed(false);\n        // console.log('unfollowOnClicked targetuid: ', props.uuid);\n        // console.log('unfollowOnClicked');\n    }\n    function followedbtnrender() {\n        return (\n            <div>\n                <button\n                    className=\"followBtn\"\n                    onClick={(e) => unfollowOnClicked(e)}\n                >\n                    Unfollow\n                </button>\n            </div>\n        );\n    }\n    function followOnClicked(e) {\n        e.preventDefault();\n        //e.currentTarget.disabled = true;\n        followTarget(props.uuid);\n        setLocIsFollowed(true);\n        //  console.log('followOnClicked targetuid: ', props.uuid);\n    }\n    function notfollowedbtnrender() {\n        return (\n            <div>\n                <button\n                    className=\"followBtn\"\n                    onClick={(e) => followOnClicked(e)}\n                >\n                    Follow\n                </button>\n            </div>\n        );\n    }\n    // console.log('profiledata', profiledata);\n\n    function editOnClick(e) {\n        e.preventDefault();\n        setEditingInfo(!editingInfo);\n    }\n    function saveEditOnClick(e) {\n        e.preventDefault();\n        setEditingInfo(false);\n        saveProfileInfoToServer(nickName, information);\n        let isNameChanged = nickName ? true : false;\n        let isInfoChange = information ? true : false;\n        if (isNameChanged) profiledata.name = nickName;\n        if (isInfoChange) profiledata.info = information;\n    }\n\n    function isOwnerRender() {\n        // console.log('isOwnerRender');\n        return (\n            <div className=\"topprofile\">\n                <div className=\"profileImgWrapper\">\n                    <img\n                        id=\"profileavatar\"\n                        src={ischangingavatar ? previewimg : profiledata.avatar}\n                        className=\"topprofileOwner\"\n                        alt=\"\"\n                        title=\"Change Profile Photo\"\n                        onClick={(e) => selectbtnonClick(e)}\n                    />\n                    <div>\n                        <input\n                            type=\"file\"\n                            id=\"getavatarFile\"\n                            onChange={(e) => onSelectChange(e)}\n                            style={{ display: 'none' }}\n                        />\n                        {ischangingavatar ? (\n                            <div className=\"saveButton\">\n                                <button onClick={(e) => onsavebtnOnclicked(e)}>\n                                    Save\n                                </button>\n                            </div>\n                        ) : (\n                            <div></div>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"profileInfoWrapper\">\n                    <div>\n                        <span className=\"usernameFont\">\n                            {profiledata.username}\n                        </span>\n                        <button\n                            className=\"editBtn\"\n                            onClick={(e) => editOnClick(e)}\n                        >\n                            Edit Profile\n                        </button>\n                    </div>\n                    {!editingInfo ? (\n                        <div>\n                            <div className=\"nicknameFont\">\n                                {profiledata.name}\n                            </div>\n                            <div>{profiledata.info}</div>\n                        </div>\n                    ) : (\n                        <div className=\"editingWrapper\">\n                            <div>\n                                <input\n                                    className=\"nameInputBox\"\n                                    type=\"text\"\n                                    defaultValue={profiledata.name}\n                                    placeholder=\"Name\"\n                                    onChange={(event) => {\n                                        nickName = event.target.value;\n                                    }}\n                                />\n                            </div>\n                            <div>\n                                <textarea\n                                    className=\"infoTextBox\"\n                                    placeholder=\"Information\"\n                                    type=\"text\"\n                                    rows=\"3\"\n                                    defaultValue={profiledata.info}\n                                    onChange={(event) => {\n                                        information = event.target.value;\n                                    }}\n                                />\n                            </div>\n\n                            <button\n                                className=\"saveBtn\"\n                                onClick={(e) => saveEditOnClick(e)}\n                            >\n                                Save\n                            </button>\n                        </div>\n                    )}\n                </div>\n            </div>\n        );\n    }\n\n    function notOwnerRender() {\n        //  console.log('notOwnerRender');\n        return (\n            <div className=\"topprofile\">\n                <div className=\"profileImgWrapper\">\n                    <img\n                        id=\"profileavatar\"\n                        src={ischangingavatar ? previewimg : profiledata.avatar}\n                        alt=\"\"\n                    />\n                </div>\n                <div className=\"profileInfoWrapper\">\n                    <div className=\"nameBtnWrapper\">\n                        <span className=\"usernameFont\">\n                            {profiledata.username}\n                        </span>\n                        {locIsFollowed\n                            ? followedbtnrender()\n                            : notfollowedbtnrender()}\n                    </div>\n\n                    <div>\n                        <div>\n                            <div className=\"nicknameFont\">\n                                {profiledata.name}\n                            </div>\n                            <div>{profiledata.info}</div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    function handleShowDetail(e, data) {\n        e.preventDefault();\n        setIsPostDetailOpen(!isPostDetailOpen);\n        //   console.log('data', data);\n        setDetailData(data);\n        //  console.log('handleShowDetail', data);\n    }\n\n    if (profiledata) {\n        return (\n            <div>\n                <Header />\n                {isPostDetailOpen ? (\n                    <PostDetail\n                        post={detailData}\n                        setIsPostDetailOpen={setIsPostDetailOpen}\n                        isPostDetailOpen={isPostDetailOpen}\n                    />\n                ) : (\n                    <div></div>\n                )}\n                <div className=\"Profile\">\n                    <Newpost />\n\n                    {isProfileowner ? isOwnerRender() : notOwnerRender()}\n\n                    <div className=\"picturegrid\">\n                        {profiledata.arr.map((profile) => {\n                            //console.log('profile', profile);\n                            return (\n                                <div className=\"gridimg\" key={uuidv4()}>\n                                    <div\n                                        className=\"imgClickable\"\n                                        onClick={(e) => {\n                                            if (profile) {\n                                                handleShowDetail(e, profile);\n                                            }\n                                        }}\n                                    >\n                                        <img src={profile.pic} alt=\"\" />\n                                    </div>\n                                </div>\n                            );\n                        })}\n                    </div>\n                </div>\n            </div>\n        );\n    } else {\n        return (\n            <div>\n                <Header />\n                <div className=\"Profile\">\n                    <Newpost />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Profile;\n","import '../style/Signup.css';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\n\nfunction MessageSelect({ closeNewMsg, HandleNextOnClick }) {\n    const { searchUserFromServer } = useContext(GlobalContext);\n    const [keyword, setKeyword] = useState('');\n    const [searchResult, setSearchResult] = useState([]);\n    const [selectedUser, setSelectedUser] = useState();\n    function onCloseClick(e) {\n        e.preventDefault();\n        closeNewMsg();\n    }\n\n    async function searchOnEnter() {\n        //console.log(keyword);\n        if (keyword !== '') {\n            let arr = await searchUserFromServer(keyword);\n            // console.log(arr);\n            setSearchResult(arr);\n        }\n    }\n    function resultItemOnClick(e, theUser) {\n        e.preventDefault();\n        setSelectedUser(theUser);\n    }\n    function nextOnClick(e) {\n        e.preventDefault();\n        HandleNextOnClick(selectedUser);\n    }\n    function resItemRender(resUser) {\n        //console.log(resUser);\n        return (\n            <div\n                className=\"searchResultItem\"\n                onClick={(e) => {\n                    resultItemOnClick(e, resUser);\n                }}\n                key={uuidv4()}\n            >\n                <div className=\"itemInfoWrapper\">\n                    <img src={resUser.avatar} alt=\"\" />\n                    <span>@{resUser.username}</span>\n                    <span>{resUser.name}</span>\n                </div>\n                <div>\n                    <svg\n                        aria-label=\"Toggle selection\"\n                        color=\"#262626\"\n                        fill=\"#262626\"\n                        height=\"24\"\n                        role=\"img\"\n                        viewBox=\"0 0 24 24\"\n                        width=\"24\"\n                    >\n                        <circle\n                            cx=\"12.008\"\n                            cy=\"12\"\n                            fill=\"none\"\n                            r=\"11.25\"\n                            stroke=\"currentColor\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth=\"1.5\"\n                        ></circle>\n                    </svg>\n                </div>\n            </div>\n        );\n    }\n    return (\n        <div className=\"msgSelectWrapper\">\n            <div className=\"newMsgHeader\">\n                <button\n                    type=\"button\"\n                    onClick={(e) => onCloseClick(e)}\n                    className=\"closebtn\"\n                >\n                    ✖\n                </button>\n                <h2>New Message</h2>\n                <div className=\"nextBtn\" onClick={(e) => nextOnClick(e)}>\n                    Next\n                </div>\n            </div>\n            <div className=\"newMsgToBox\">\n                <span>To: </span>\n                {selectedUser ? (\n                    <span className=\"selectedWrapper\">\n                        {selectedUser.username}\n                    </span>\n                ) : (\n                    <span></span>\n                )}\n\n                <input\n                    type=\"text\"\n                    placeholder=\"Search...\"\n                    onChange={(e) => {\n                        setKeyword(e.target.value);\n                    }}\n                    onKeyDown={(e) => {\n                        if (e.code === 'Enter') {\n                            e.preventDefault();\n                            searchOnEnter();\n                            e.target.value = '';\n                        }\n                    }}\n                />\n            </div>\n            <span>Suggested</span>\n            <div className=\"searchResultBox\">\n                {searchResult.map((resUser) => resItemRender(resUser))}\n            </div>\n        </div>\n    );\n}\n\nexport default MessageSelect;\n","import '../style/Message.css';\nimport Header from './Header';\nimport Newpost from './Newpost';\nimport MessageSelect from './MessageSelect';\nimport defaultMessageImg from '../images/defaultMessage.jpg';\nimport { GlobalContext } from '../context/GlobalState';\nimport { useContext, useEffect, useState } from 'react';\nimport { v4 as uuidv4 } from 'uuid';\nfunction Message(props) {\n    const {\n        displayname,\n        allRooms,\n        chatHistory,\n        fetchChatHistoryByRoom,\n        postChatToServer,\n        createChatroomOnServer,\n        chatRoomId,\n    } = useContext(GlobalContext);\n    const [isDefaultView, setIsDefaultView] = useState(true);\n    const [isSelectBoxOpen, setIsSelectBoxOpen] = useState(false); // FIXME change to false\n    const [keyword, setKeyword] = useState('');\n    useEffect(() => {\n        // console.log('in useEffect', allRooms);\n    }, [chatHistory, isDefaultView]);\n\n    function nameOnClick(e, roomid) {\n        e.preventDefault();\n        //console.log(e);\n        setIsDefaultView(false);\n        fetchChatHistoryByRoom(roomid);\n    }\n\n    function sendMsgOnClick(e) {\n        e.preventDefault();\n        setIsSelectBoxOpen(true);\n        //console.log(e);\n    }\n\n    function closeNewMsg() {\n        setIsSelectBoxOpen(false);\n    }\n\n    function HandleNextOnClick(target) {\n        setIsSelectBoxOpen(false);\n        if (target) {\n            createChatroomOnServer(target);\n        }\n\n        setIsDefaultView(false);\n    }\n\n    function roomRender(room) {\n        if (room) {\n            return (\n                <div\n                    className={\n                        chatRoomId === room.roomid\n                            ? 'msgListItem select'\n                            : 'msgListItem'\n                    }\n                    key={room.roomid}\n                    id={room.roomid}\n                    onClick={(e) => nameOnClick(e, room.roomid)}\n                >\n                    <img\n                        className=\"chatAvatar\"\n                        src={room.friendAvatar}\n                        alt=\"\"\n                    />\n                    {room.friendName}\n                </div>\n            );\n        } else {\n            return <div key={uuidv4()}></div>;\n        }\n    }\n    async function sendMessage() {\n        await postChatToServer(keyword);\n    }\n    return (\n        <div>\n            <Header />\n\n            <div className=\"msgContainer\">\n                <Newpost />\n                {isSelectBoxOpen ? (\n                    <MessageSelect\n                        closeNewMsg={closeNewMsg}\n                        HandleNextOnClick={HandleNextOnClick}\n                    />\n                ) : (\n                    <div></div>\n                )}\n                <div className=\"msgLeft\">\n                    <div className=\"msgLeftHeader\">\n                        <span>{displayname}</span>\n\n                        <svg\n                            aria-label=\"New Message\"\n                            color=\"#262626\"\n                            fill=\"#262626\"\n                            height=\"24\"\n                            role=\"img\"\n                            viewBox=\"0 0 44 44\"\n                            width=\"24\"\n                            onClick={(e) => sendMsgOnClick(e)}\n                        >\n                            <path d=\"M33.7 44.12H8.5a8.41 8.41 0 01-8.5-8.5v-25.2a8.41 8.41 0 018.5-8.5H23a1.5 1.5 0 010 3H8.5a5.45 5.45 0 00-5.5 5.5v25.2a5.45 5.45 0 005.5 5.5h25.2a5.45 5.45 0 005.5-5.5v-14.5a1.5 1.5 0 013 0v14.5a8.41 8.41 0 01-8.5 8.5z\"></path>\n                            <path d=\"M17.5 34.82h-6.7a1.5 1.5 0 01-1.5-1.5v-6.7a1.5 1.5 0 01.44-1.06L34.1 1.26a4.45 4.45 0 016.22 0l2.5 2.5a4.45 4.45 0 010 6.22l-24.3 24.4a1.5 1.5 0 01-1.02.44zm-5.2-3h4.58l23.86-24a1.45 1.45 0 000-2l-2.5-2.5a1.45 1.45 0 00-2 0l-24 23.86z\"></path>\n                            <path d=\"M38.2 14.02a1.51 1.51 0 01-1.1-.44l-6.56-6.56a1.5 1.5 0 012.12-2.12l6.6 6.6a1.49 1.49 0 010 2.12 1.51 1.51 0 01-1.06.4z\"></path>\n                        </svg>\n                    </div>\n\n                    <div className=\"msgListWrapper\">\n                        {allRooms.map((room) => roomRender(room))}\n                    </div>\n                </div>\n                <div className=\"msgRight\">\n                    {isDefaultView ? (\n                        <div className=\"centerWrapper\">\n                            <div className=\"msgDefaultWrapper\">\n                                <img src={defaultMessageImg} alt=\"\" />\n                                <h2>Your Messages</h2>\n                                <p>\n                                    Send private photos and messages to a friend\n                                    or group\n                                </p>\n                                <button\n                                    className=\"newMsgBtn\"\n                                    onClick={(e) => sendMsgOnClick(e)}\n                                >\n                                    Send Message\n                                </button>\n                            </div>\n                        </div>\n                    ) : (\n                        <div className=\"chatHistoryWrapper\">\n                            <div className=\"chatHistoryBox\">\n                                {chatHistory.map((chat) => {\n                                    return (\n                                        <div\n                                            key={uuidv4()}\n                                            className={\n                                                chat.position === 0\n                                                    ? 'rightchatItem'\n                                                    : 'leftchatItem'\n                                            }\n                                        >\n                                            <div className=\"chatItem\">\n                                                <div>{chat.content}</div>\n                                                <div className=\"chatTime\">\n                                                    {chat.time}\n                                                </div>\n                                            </div>\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                            <div className=\"msgSendBox\">\n                                <input\n                                    type=\"text\"\n                                    placeholder=\"Message...\"\n                                    onChange={(e) => {\n                                        setKeyword(e.target.value);\n                                    }}\n                                    onKeyDown={(e) => {\n                                        if (e.code === 'Enter') {\n                                            e.preventDefault();\n                                            sendMessage();\n                                            e.target.value = '';\n                                        }\n                                    }}\n                                />\n                                <div\n                                    className=\"nextBtn\"\n                                    onClick={(e) => {\n                                        e.target.parentNode.firstChild.value =\n                                            '';\n                                        e.preventDefault();\n                                        sendMessage();\n                                    }}\n                                >\n                                    Send\n                                </div>\n                            </div>\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Message;\n","export default \"data:image/jpeg;base64,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\"","import { HashRouter, Switch, Route } from 'react-router-dom';\nimport Home from './Home';\nimport Signup from './Signup';\nimport Signin from './Signin';\nimport Profile from './Profile';\nimport Message from './Message';\nimport { GlobalProvider } from '../context/GlobalState';\n\nconst Routes = () => {\n    return (\n        <HashRouter>\n            <Switch>\n                <GlobalProvider>\n                    <Route exact path=\"/\" render={(props) => <Home />} />\n                    <Route exact path=\"/signup\" component={Signup} />\n                    <Route exact path=\"/signin\" component={Signin} />\n                    <Route exact path=\"/signout\" component={Signin} />\n                    <Route exact path=\"/message\" component={Message} />\n                    <Route\n                        exact\n                        path=\"/profile/:username/:uuid\"\n                        render={(props) => (\n                            <Profile\n                                username={props.match.params.username}\n                                uuid={props.match.params.uuid}\n                            />\n                        )}\n                    />\n                </GlobalProvider>\n            </Switch>\n        </HashRouter>\n    );\n};\n\nexport default Routes;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Routes from './components/Routes';\n\nReactDOM.render(\n    <React.StrictMode>\n        <Routes />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}